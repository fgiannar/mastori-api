{
    "swagger": "2.0",
    "info": {
        "title": "Mastori Api specification",
        "description": "",
        "contact": {
            "email": "giannaropoulou.foteini@gmail.com;tania.pets@gmail.com"
        },
        "version": "1.0.0"
    },
    "schemes": [
        "http"
    ],
    "paths": {
        "/mastoria": {
            "get": {
                "tags": [
                    "mastoria"
                ],
                "description": "Returns all the mastoria",
                "operationId": "getMastoria",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "Authorization",
                        "in": "header",
                        "description": "Access token",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "mastori response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/mastori"
                            }
                        }
                    },
                    "400": {
                        "description": "token_not_provided",
                        "schema": {
                            "$ref": "#/definitions/errorModel"
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "mastoria"
                ],
                "description": "Adds a new mastori in database",
                "operationId": "addMastori",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "Authorization",
                        "in": "header",
                        "description": "Access token",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/mastori"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns created Mastori object",
                        "schema": {
                            "$ref": "#/definitions/mastori"
                        }
                    },
                    "400": {
                        "description": "unauthorized",
                        "schema": {
                            "$ref": "#/definitions/errorModel"
                        }
                    },
                    "500": {
                        "description": "error",
                        "schema": {
                            "$ref": "#/definitions/errorModel"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "address": {
            "required": [
                "lat",
                "lng",
                "address",
                "city",
                "country"
            ],
            "properties": {
                "id": {
                    "type": "integer",
                    "readOnly": true
                },
                "lat": {
                    "type": "double"
                },
                "lng": {
                    "type": "double"
                },
                "address": {
                    "type": "string"
                },
                "friendly_name": {
                    "type": "string"
                },
                "city": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "created_at": {
                    "type": "dateTime",
                    "readOnly": true
                },
                "updated_at": {
                    "type": "dateTime",
                    "readOnly": true
                }
            }
        },
        "endUser": {
            "required": [
                "name",
                "phone"
            ],
            "properties": {
                "id": {
                    "type": "integer",
                    "readOnly": true
                },
                "name": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "photo": {
                    "type": "string"
                },
                "created_at": {
                    "type": "dateTime",
                    "readOnly": true
                },
                "updated_at": {
                    "type": "dateTime",
                    "readOnly": true
                },
                "favorites": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/mastori"
                    }
                }
            }
        },
        "mastori": {
            "required": [
                "username",
                "email",
                "password",
                "last_name",
                "first_name",
                "phone",
                "pricelist"
            ],
            "properties": {
                "id": {
                    "type": "integer",
                    "readOnly": true
                },
                "username": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string",
                    "format": "password"
                },
                "last_name": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "paratsoukli": {
                    "type": "string"
                },
                "facebook_id": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "pricelist": {
                    "type": "string"
                },
                "avg_response_time": {
                    "type": "integer"
                },
                "avg_rating": {
                    "type": "float"
                },
                "active": {
                    "type": "integer"
                },
                "created_at": {
                    "type": "dateTime",
                    "readOnly": true
                },
                "updated_at": {
                    "type": "dateTime",
                    "readOnly": true
                },
                "addresses": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/address"
                    }
                },
                "professions": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/profession"
                    }
                }
            }
        },
        "profession": {
            "required": [
                "tag",
                "title"
            ],
            "properties": {
                "id": {
                    "type": "integer",
                    "readOnly": true
                },
                "tag": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "created_at": {
                    "type": "dateTime",
                    "readOnly": true
                },
                "updated_at": {
                    "type": "dateTime",
                    "readOnly": true
                }
            }
        },
        "rating": {
            "required": [
                "rating",
                "editing_expires_at",
                "body",
                "status",
                "enduser",
                "mastori"
            ],
            "properties": {
                "id": {
                    "type": "integer",
                    "readOnly": true
                },
                "rating": {
                    "type": "integer"
                },
                "editing_expires_at": {
                    "type": "dateTime"
                },
                "body": {
                    "type": "string"
                },
                "status": {
                    "type": "string",
                    "default": "pending",
                    "enum": "['pending', 'approved', 'cancelled']"
                },
                "updated_at": {
                    "type": "dateTime",
                    "readOnly": true
                }
            }
        }
    }
}